webpackJsonp([12],{"6XM2":function(t,i){},NbJp:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=s("gyMJ"),a=s("TVG1"),n={data:function(){return{info:{},appid:"",wxInfo:{},orderNo:""}},created:function(){this.wxLogin(),this.getInsuranceDetail(),this.orderNo=this.$route.query.no,"1"==this.$route.query.empower&&this.orderPay()},methods:{orderPay:function(){var t=this;Object(e.c)("api",{s:"/hapi/Insurance/orderPay",orderNo:this.orderNo}).then(function(i){i&&(console.log(i),-502==i.code&&(a.a.set("backLink","/policyDetails?&no="+t.orderNo+"&empower=1",6e4),window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+t.appid+"&redirect_uri=http://m.cyongpet.com/payIndex&response_type=code&scope=snsapi_base&state=123#wechat_redirect"),t.wxInfo=i.payment,t.wxPay(t.appid,t.wxInfo))})},wxLogin:function(){var t=this;Object(e.c)("api",{s:"/hapi/Weixin/getAppid"}).then(function(i){i&&(t.appid=i.appid)})},wxPay:function(t,i){var s=this;function e(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t,timeStamp:i.timeStamp,nonceStr:i.nonceStr,package:"prepay_id="+i.prepay_id,signType:"MD5",paySign:i.paySign},function(t){"get_brand_wcpay_request:ok"==t.err_msg?(alert("支付成功！"),s.$router.push("/warranty")):s.$router.push("/warranty")})}"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",e,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",e),document.attachEvent("onWeixinJSBridgeReady",e)):e()},getInsuranceDetail:function(){var t=this;Object(e.c)("api",{s:"/hapi/Insurance/detail",orderNo:this.$route.query.no}).then(function(i){i&&(t.info=i)})}},beforeCreate:function(){document.getElementsByTagName("body")[0].className="add_bg"},beforeMount:function(){document.getElementsByTagName("body")[0].className="add_bg"},beforeDestroy:function(){document.body.removeAttribute("class")},destroy:function(){document.body.removeAttribute("class")},mounted:function(){document.getElementsByTagName("body")[0].className="add_bg"}},o={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",[s("div",{staticClass:"public-view"},[s("div",{staticClass:"info"},[s("div",{staticClass:"title"},[s("div",{staticClass:"left"},[t._v(t._s(t.info.statusText))]),t._v(" "),s("div",{staticClass:"right"},[0==t.info.status?s("span",{staticClass:"captchaStyle",on:{click:function(i){return t.orderPay()}}},[t._v("支付")]):t._e()])]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"left"},[t._v("订单服务ID")]),t._v(" "),s("div",{staticClass:"right"},[t._v(t._s(t.info.insurance_order_no))])]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"left"},[t._v("支付价格")]),t._v(" "),s("div",{staticClass:"right"},[t._v(t._s(t.info.money_total)+"元")])]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"left"},[t._v("保障治疗金额度")]),t._v(" "),s("div",{staticClass:"right"},[t._v(t._s(t.info.all_pay)+"元/"+t._s(t.info.security_date))])]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"left"},[t._v("自付额度及保障比例")]),t._v(" "),s("div",{staticClass:"right"},[t._v(t._s(t.info.pay_self)+"元 "+t._s(100*t.info.scale_pay)+"%")])]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"left"},[t._v("宠物姓名")]),t._v(" "),s("div",{staticClass:"right"},[t._v(t._s(t.info.pet_name))])]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"left"},[t._v("性别")]),t._v(" "),s("div",{staticClass:"right"},[t._v(t._s(t.info.pet_sex))])]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"left"},[t._v("绝育")]),t._v(" "),s("div",{staticClass:"right"},[t._v(t._s(t.info.pet_sterilization))])]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"left"},[t._v("出生日期")]),t._v(" "),s("div",{staticClass:"right"},[t._v(t._s(t.info.pet_birthday))])]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"left"},[t._v("主人姓名")]),t._v(" "),s("div",{staticClass:"right"},[t._v(t._s(t.info.contacter))])]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"left"},[t._v("主人电话")]),t._v(" "),s("div",{staticClass:"right"},[t._v(t._s(t.info.phone))])]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"left"},[t._v("主人地区")]),t._v(" "),s("div",{staticClass:"right"},[t._v(t._s(t.info.address))])]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"left"},[t._v("观察期")]),t._v(" "),s("div",{staticClass:"right"},[t._v("自"+t._s(t.info.wait_date_start)+"起至"+t._s(t.info.wait_date_end)+"止")])]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"left"},[t._v("保障期")]),t._v(" "),s("div",{staticClass:"right"},[t._v("自"+t._s(t.info.security_date_start)+"起至"+t._s(t.info.security_date_end)+"止")])])])])])},staticRenderFns:[]};var c=s("C7Lr")(n,o,!1,function(t){s("6XM2")},"data-v-6409064c",null);i.default=c.exports}});